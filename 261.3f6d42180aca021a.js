"use strict";(self.webpackChunkpaddle_scorer=self.webpackChunkpaddle_scorer||[]).push([[261],{8261:(H,c,a)=>{a.r(c),a.d(c,{GamePageModule:()=>F,routes:()=>m});var s=a(9808),p=a(1799),u=a(7579),y=a(2722),e=a(1223),_=a(1397),C=a(9783),d=a(845),f=a(8420);const h=[[["","score-team-0",""]],[["","slot-0-0",""]],[["","slot-0-1",""]],[["","slot-1-0",""]],[["","slot-1-1",""]],[["","score-team-1",""]]],P=["[score-team-0]","[slot-0-0]","[slot-0-1]","[slot-1-0]","[slot-1-1]","[score-team-1]"];let x=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-stadium"]],ngContentSelectors:P,decls:16,vars:0,consts:[[1,"side","side-left"],[1,"side-score","score-left"],[1,"side-slots","slots-left"],[1,"side-slot","slot-top"],[1,"side-slot","slot-bottom"],[1,"side","side-right"],[1,"side-slots","slots-right"],[1,"side-score","score-right"]],template:function(t,o){1&t&&(e.F$t(h),e.TgZ(0,"div",0)(1,"div",1),e.Hsn(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3),e.Hsn(5,1),e.qZA(),e.TgZ(6,"div",4),e.Hsn(7,2),e.qZA()()(),e.TgZ(8,"div",5)(9,"div",6)(10,"div",3),e.Hsn(11,3),e.qZA(),e.TgZ(12,"div",4),e.Hsn(13,4),e.qZA()(),e.TgZ(14,"div",7),e.Hsn(15,5),e.qZA()())},styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%;background-image:url(paddle-stadium-texture.d219335cb36d347c.jpg);background-position:center center;background-repeat:repeat;background-size:auto;position:relative}[_nghost-%COMP%]   .side[_ngcontent-%COMP%]{display:flex;height:100%;flex:0 0 50%;overflow:hidden;border-top:2px solid grey;border-bottom:2px solid grey}[_nghost-%COMP%]   .side.side-left[_ngcontent-%COMP%]{border-left:2px solid grey}[_nghost-%COMP%]   .side.side-right[_ngcontent-%COMP%]{border-right:2px solid grey}[_nghost-%COMP%]   .side[_ngcontent-%COMP%]   .side-score[_ngcontent-%COMP%]{display:flex;flex:0 0 25%}[_nghost-%COMP%]   .side[_ngcontent-%COMP%]   .side-slots[_ngcontent-%COMP%]{display:flex;flex:0 0 75%;height:100%;flex-direction:column;overflow:hidden}[_nghost-%COMP%]   .side[_ngcontent-%COMP%]   .side-slots.slots-left[_ngcontent-%COMP%]{border-left:4px solid white;border-right:4px solid #cdd195}[_nghost-%COMP%]   .side[_ngcontent-%COMP%]   .side-slots.slots-right[_ngcontent-%COMP%]{border-right:4px solid white;border-left:4px solid #cdd195}[_nghost-%COMP%]   .side[_ngcontent-%COMP%]   .side-slots[_ngcontent-%COMP%]   .side-slot[_ngcontent-%COMP%]{display:flex;flex:1}[_nghost-%COMP%]   .side[_ngcontent-%COMP%]   .side-slots[_ngcontent-%COMP%]   .side-slot.slot-top[_ngcontent-%COMP%]{border-bottom:2px solid white}[_nghost-%COMP%]   .side[_ngcontent-%COMP%]   .side-slots[_ngcontent-%COMP%]   .side-slot.slot-bottom[_ngcontent-%COMP%]{border-top:2px solid white}"],changeDetection:0}),n})(),M=(()=>{class n{constructor(){this.scoreClick=new e.vpe}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-score"]],inputs:{score:"score",point:"point"},outputs:{scoreClick:"scoreClick"},decls:11,vars:3,consts:[[1,"score-sets"],[1,"score-button",3,"label","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"span"),e._uU(2,"Set"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA()(),e.TgZ(5,"div",0)(6,"span"),e._uU(7,"Point"),e.qZA(),e.TgZ(8,"span"),e._uU(9),e.qZA()(),e.TgZ(10,"p-button",1),e.NdJ("click",function(){return o.scoreClick.emit()}),e.qZA()),2&t&&(e.xp6(4),e.Oqu(o.score.sets),e.xp6(5),e.Oqu(o.score.points),e.xp6(1),e.s9C("label",o.point))},directives:[d.zx],styles:["[_nghost-%COMP%]{display:flex;flex:1;flex-direction:column;gap:16px}[_nghost-%COMP%]   .score-button[_ngcontent-%COMP%]{display:flex;flex:1}[_nghost-%COMP%]   .score-button[_ngcontent-%COMP%]     button{display:flex;flex:1;font-size:1.5rem}[_nghost-%COMP%]   .score-sets[_ngcontent-%COMP%]{display:flex;justify-content:space-between;background-color:#fdf4cd;border-radius:4px;padding:4px 8px;align-items:center}"],changeDetection:0}),n})();const O=function(n){return{background:n}};let b=(()=>{class n{constructor(){this.player=void 0,this.playerClick=new e.vpe}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-player"]],inputs:{player:"player"},outputs:{playerClick:"playerClick"},decls:5,vars:4,consts:[[1,"player",3,"click"],[1,"player-background-color",3,"ngStyle"],[1,"pi","pi-user"],[1,"player-span"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return o.playerClick.emit(o.player)}),e._UZ(1,"div",1)(2,"i",2),e.TgZ(3,"span",3),e._uU(4),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngStyle",e.VKq(2,O,(null==o.player?null:o.player.color)||"white")),e.xp6(3),e.Oqu(null==o.player?null:o.player.name))},directives:[s.PC],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]{display:flex;position:relative;height:100%;width:100%;padding:8px;gap:8px;justify-content:center;align-items:center}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .player-background-color[_ngcontent-%COMP%]{position:absolute;inset:0;opacity:.5;z-index:0}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{z-index:1}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .player-span[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;font-size:2rem;z-index:1}"],changeDetection:0}),n})();var v=a(5315),S=a(5055),k=a(9114);const Z=function(n,r,t){return{"score-animation":n,"player-animation":r,"stadium-animation":t}};function T(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2)(2,"h1",3),e._uU(3,"JUGANDO"),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(i){return e.CHM(t),e.MAs(6).toggle(i)}),e.qZA(),e._UZ(5,"p-menu",5,6),e.qZA(),e.TgZ(7,"app-stadium",7)(8,"app-score",8),e.NdJ("scoreClick",function(){const l=e.CHM(t).ngIf;return e.oxw().incrementPointAt(l,0)}),e.qZA(),e.TgZ(9,"app-player",9),e.NdJ("playerClick",function(){return e.CHM(t),e.oxw().openPlayerSelector(0,0)}),e.qZA(),e.TgZ(10,"app-player",10),e.NdJ("playerClick",function(){return e.CHM(t),e.oxw().openPlayerSelector(0,1)}),e.qZA(),e.TgZ(11,"app-player",11),e.NdJ("playerClick",function(){return e.CHM(t),e.oxw().openPlayerSelector(1,0)}),e.qZA(),e.TgZ(12,"app-player",12),e.NdJ("playerClick",function(){return e.CHM(t),e.oxw().openPlayerSelector(1,1)}),e.qZA(),e.TgZ(13,"app-score",13),e.NdJ("scoreClick",function(){const l=e.CHM(t).ngIf;return e.oxw().incrementPointAt(l,1)}),e.qZA()(),e.TgZ(14,"p-dialog",14),e.NdJ("visibleChange",function(i){return e.CHM(t),e.oxw().displayPlayerSelector=i}),e.TgZ(15,"p-listbox",15),e.NdJ("onClick",function(i){return e.CHM(t),e.oxw().playerSelectorClick(i)}),e.qZA()(),e.BQk()}if(2&n){const t=r.ngIf,o=e.oxw();e.xp6(5),e.Q6J("popup",!0)("model",o.menuOptions),e.xp6(2),e.Q6J("ngClass",e.kEZ(16,Z,t.isGoldenPoint,t.isGoldenSet,t.isGoldenGame)),e.xp6(1),e.Q6J("score",o.getScoreAt(t,0))("point",t.points[0]),e.xp6(1),e.Q6J("player",o.getPlayerAt(t,0,0)),e.xp6(1),e.Q6J("player",o.getPlayerAt(t,0,1)),e.xp6(1),e.Q6J("player",o.getPlayerAt(t,1,0)),e.xp6(1),e.Q6J("player",o.getPlayerAt(t,1,1)),e.xp6(1),e.Q6J("score",o.getScoreAt(t,1))("point",t.points[1]),e.xp6(1),e.Q6J("modal",!0)("dismissableMask",!0)("header",o.playerSelectorHeader)("visible",o.displayPlayerSelector),e.xp6(1),e.Q6J("options",t.participants)}}let A=(()=>{class n{constructor(t,o,i,l){this.gameService=t,this.router=o,this.confirmationService=i,this.document=l,this.displayPlayerSelector=!1,this.playerSelectorHeader="",this.isFullScreen=!1,this.playerSelectorTeamIndex=null,this.playerSelectorPlayerIndex=null,this._onDestroy=new u.x,this.menuOptions=this.getMenuOptions()}get game$(){return this.gameService.game$}ngOnInit(){this.gameService.game$.pipe((0,y.R)(this._onDestroy)).subscribe(({isEndGame:t})=>{!1!==t&&this.confirmationService.confirm({header:`\xa1\xa1\xa1 Ganador equipo ${t+1} !!!`,message:"Fin del juego",closeOnEscape:!1,acceptLabel:"reiniciar",rejectVisible:!1,accept:()=>{this.gameService.restartGame()}})})}getPlayerAt(t,o,i){return t.teams[o].players[i]}getScoreAt(t,o){return t.teams[o].score}openPlayerSelector(t,o){this.playerSelectorTeamIndex=t,this.playerSelectorPlayerIndex=o,this.playerSelectorHeader=`Elegir para el equipo ${t+1}`,this.displayPlayerSelector=!0}playerSelectorClick({option:t}){this.displayPlayerSelector=!1,this.gameService.setGamePlayerAt(this.playerSelectorTeamIndex,this.playerSelectorPlayerIndex,t),this.playerSelectorTeamIndex=null,this.playerSelectorPlayerIndex=null}incrementPointAt(t,o){this.gameService.incrementPointAt(t,o)}ngOnDestroy(){this._onDestroy.next(),this._onDestroy.complete()}getMenuOptions(){return[{label:"deshacer cambio",icon:"pi pi-undo",command:()=>{this.gameService.undoGameStatus()}},{label:(this.isFullScreen?"Quit":"")+" full screen",icon:"pi pi-window-"+(this.isFullScreen?"minimize":"maximize"),command:()=>{var t,o,i;this.isFullScreen?(null===(t=this.document)||void 0===t||t.exitFullscreen(),this.isFullScreen=!1):(null===(i=null===(o=this.document)||void 0===o?void 0:o.documentElement)||void 0===i||i.requestFullscreen(),this.isFullScreen=!0),this.menuOptions=this.getMenuOptions()}},{label:"reiniciar",icon:"pi pi-refresh",command:()=>{this.confirmationService.confirm({header:"Reiniciar",message:"Volver a empezar todo el juego?",closeOnEscape:!1,acceptLabel:"Confirmar",accept:()=>{this.gameService.restartGame()}})}},{label:"Ir al inicio",icon:"pi pi-home",command:()=>{this.confirmationService.confirm({header:"Ir al inicio",message:"Al salir se borrar\xe1 el progreso, continuar?",closeOnEscape:!1,acceptLabel:"Salir",accept:()=>{this.router.navigate(["home"])}})}}]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.h),e.Y36(p.F0),e.Y36(C.YP),e.Y36(s.K0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],decls:3,vars:4,consts:[[4,"ngIf"],["icon","pi pi-exclamation-triangle",3,"closable"],[1,"game-title"],[1,"game-h1"],["type","button","pButton","","icon","pi pi-bars",1,"p-button-text","p-button-secondary",3,"click"],[3,"popup","model"],["menu",""],[1,"stadium",3,"ngClass"],["score-team-0","",1,"stadium-score","score-team-0",3,"score","point","scoreClick"],["slot-0-0","",1,"stadium-player","player-team-0",3,"player","playerClick"],["slot-0-1","",1,"stadium-player","player-team-0",3,"player","playerClick"],["slot-1-0","",1,"stadium-player","player-team-1",3,"player","playerClick"],["slot-1-1","",1,"stadium-player","player-team-1",3,"player","playerClick"],["score-team-1","",1,"stadium-score","score-team-1",3,"score","point","scoreClick"],["position","right",3,"modal","dismissableMask","header","visible","visibleChange"],["optionLabel","name","optionValue","name",3,"options","onClick"]],template:function(t,o){1&t&&(e.YNc(0,T,16,20,"ng-container",0),e.ALo(1,"async"),e._UZ(2,"p-confirmDialog",1)),2&t&&(e.Q6J("ngIf",e.lcZ(1,2,o.game$)),e.xp6(2),e.Q6J("closable",!1))},directives:[s.O5,d.Hq,f.v2,x,s.mk,M,b,v.V,S.Ri,k.Q],pipes:[s.Ov],styles:['[_nghost-%COMP%]{display:flex;width:100%;height:100vh;overflow:hidden;flex-direction:column}[_nghost-%COMP%]   .game-title[_ngcontent-%COMP%]{display:flex;background:#bed1eb;border-bottom:1px solid #7c7c7c}[_nghost-%COMP%]   .game-title[_ngcontent-%COMP%]   .game-h1[_ngcontent-%COMP%]{display:flex;width:100%;flex:1;justify-content:center;margin:0;padding:8px 0}[_nghost-%COMP%]   .stadium[_ngcontent-%COMP%]   .stadium-player[_ngcontent-%COMP%]{display:flex;flex:1;margin:16px;border-radius:4px;border:2px solid greenyellow;overflow:hidden}[_nghost-%COMP%]   .stadium[_ngcontent-%COMP%]   .stadium-player.player-team-0[_ngcontent-%COMP%]{margin-right:42px}[_nghost-%COMP%]   .stadium[_ngcontent-%COMP%]   .stadium-player.player-team-1[_ngcontent-%COMP%]{margin-left:42px}[_nghost-%COMP%]   .stadium[_ngcontent-%COMP%]   .stadium-score[_ngcontent-%COMP%]{padding:9px}[_nghost-%COMP%]   .stadium.stadium-animation[_ngcontent-%COMP%]{--border-size: 3px;--border-angle: 0turn;background-image:conic-gradient(from var(--border-angle),#213,#112 50%,#213),conic-gradient(from var(--border-angle),transparent 20%,#08f,#f03);background-size:calc(100% - var(--border-size) * 2) calc(100% - var(--border-size) * 2),cover;background-position:center center;background-repeat:no-repeat;animation:bg-spin 3s linear infinite}[_nghost-%COMP%]   .stadium.score-animation[_ngcontent-%COMP%]     .score-button button{animation:colorsBW 3s ease-in-out infinite}[_nghost-%COMP%]   .stadium.player-animation[_ngcontent-%COMP%]     .player{animation:colorsBW 1s ease-in-out infinite}@keyframes colorsBW{0%{background-color:#a52626;color:#fff}50%{background-color:#fff;color:#000}to{background-color:#b31f81;color:#fff}}@keyframes bg-spin{to{--border-angle: 1turn}}@property --border-angle{syntax: "<angle>"; inherits: true; initial-value: 0turn;}']}),n})(),w=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[s.ez]]}),n})();var g=a(7786);let J=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[s.ez]]}),n})(),G=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[s.ez,g.m]]}),n})();const m=[{path:"",component:A}];let F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[s.ez,p.Bz.forChild(m),w,g.m,J,G]]}),n})()}}]);