<!-- TODO: hacer la sumatoria de score, revertir ultimo puntaje, y el fin de juego (reiniciar). -->
<!-- TODO: contar cuantos partidos jugÃ³ cada jugador, rotar jugadores al finalizar con un algoritmo -->
<!-- TODO: Rotar con el saque: podria haber un boton sobre el slot para elegir quien inicia el saque -->
<ng-container *ngIf="game$ | async as game">
    <div class="game-title">
        <h1 class="game-h1">JUGANDO</h1>
        <!-- TODO: tres puntitos: reiniciar partido, ir al inicio, full width -->
    </div>
    <app-stadium class="stadium">
        <div
            class="stadium-score"
            score-left>
            SL
        </div>
        <div
            class="stadium-slot slot-left"
            slot-0-0
            (click)="openPlayerSelector(0, 0)">
            <div
                class="slot-background-color"
                [ngStyle]="{ background: getPlayerAt(game, 0, 0)?.color || 'white' }"></div>
            <i class="pi pi-user"></i>
            <span class="slot-span">{{ getPlayerAt(game, 0, 0)?.name }}</span>
        </div>
        <div
            class="stadium-slot slot-left"
            slot-0-1
            (click)="openPlayerSelector(0, 1)">
            <div
                class="slot-background-color"
                [ngStyle]="{ background: getPlayerAt(game, 0, 1)?.color || 'white' }"></div>
            <i class="pi pi-user"></i>
            <span class="slot-span">{{ getPlayerAt(game, 0, 1)?.name }}</span>
        </div>
        <div
            class="stadium-slot slot-right"
            slot-1-0
            (click)="openPlayerSelector(1, 0)">
            <div
                class="slot-background-color"
                [ngStyle]="{ background: getPlayerAt(game, 1, 0)?.color || 'white' }"></div>
            <i class="pi pi-user"></i>
            <span class="slot-span">{{ getPlayerAt(game, 1, 0)?.name }}</span>
        </div>
        <div
            class="stadium-slot slot-right"
            slot-1-1
            (click)="openPlayerSelector(1, 1)">
            <div
                class="slot-background-color"
                [ngStyle]="{ background: getPlayerAt(game, 1, 1)?.color || 'white' }"></div>
            <i class="pi pi-user"></i>
            <span class="slot-span">{{ getPlayerAt(game, 1, 1)?.name }}</span>
        </div>
        <div
            class="stadium-score"
            score-right>
            SR
        </div>
    </app-stadium>
    <p-dialog
        position="right"
        [modal]="true"
        [dismissableMask]="true"
        [header]="playerSelectorHeader"
        [(visible)]="displayPlayerSelector">
        <p-listbox
            [options]="game.participants"
            optionLabel="name"
            optionValue="name" (onClick)="playerSelectorClick($event)"></p-listbox>
    </p-dialog>
</ng-container>
