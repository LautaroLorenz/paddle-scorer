"use strict";(self.webpackChunkpaddle_scorer=self.webpackChunkpaddle_scorer||[]).push([[177],{4177:(F,m,a)=>{a.r(m),a.d(m,{HomePageModule:()=>J,routes:()=>f});var c=a(9808),l=a(6342),o=a(2382),h=a(5698),u=a(3864),t=a(1223),y=a(2069);const _=["*"];let P=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-center-layout"]],ngContentSelectors:_,decls:1,vars:0,template:function(n,r){1&n&&(t.F$t(),t.Hsn(0))},styles:["[_nghost-%COMP%]{padding:32px;display:flex;flex-direction:column;justify-content:center;align-items:center}"],changeDetection:0}),e})();var g=a(845),x=a(7579),v=a(2722),M=a(6888),O=a(1424);let b=(()=>{class e{constructor(n){this.formArranyName=n,this._onDestroy=new x.x}ngOnInit(){if(!this.formGroupName)throw new Error("undefined @Input formGroupName");if(!this.formArranyName)throw new Error("undefined container formArranyName");if(this.formGroup=this.formArranyName.control.get(this.formGroupName),!this.formGroup)throw new Error(`undefined control ${this.formGroupName} of array ${this.formArranyName}`);this.formGroup.valueChanges.pipe((0,v.R)(this._onDestroy)).subscribe(()=>{this.formArranyName.control.updateValueAndValidity()})}writeValue(n){}registerOnChange(n){this._onChange=n}registerOnTouched(n){this._onTouched=n}setDisabledState(n){}ngOnDestroy(){this._onDestroy.next(),this._onDestroy.complete()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(o.CE,4))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-participant-input"]],inputs:{formGroupName:"formGroupName"},features:[t._Bn([{provide:o.JU,useExisting:e,multi:!0}])],decls:3,vars:1,consts:[[3,"formGroup"],["formControlName","color"],["type","text","pInputText","","placeholder","Nombre","formControlName","name"]],template:function(n,r){1&n&&(t.TgZ(0,"form",0),t._UZ(1,"p-colorPicker",1)(2,"input",2),t.qZA()),2&n&&t.Q6J("formGroup",r.formGroup)},directives:[o._Y,o.JL,o.sg,M.zH,o.JJ,o.u,o.Fj,O.o],styles:["[_nghost-%COMP%]   form[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}"],changeDetection:0}),e})();var N=a(7010);function A(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",16),t._UZ(1,"app-participant-input",17),t.TgZ(2,"p-button",18),t.NdJ("click",function(){const p=t.CHM(n).index,C=t.oxw(2);return C.participants.controls.length>4&&C.removeParticipantControl(p)}),t.qZA()()}if(2&e){const n=i.index,r=t.oxw(2);t.xp6(1),t.s9C("formGroupName",n),t.xp6(1),t.Q6J("disabled",r.participants.controls.length<=4)}}function I(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"app-center-layout")(1,"h1"),t._uU(2,"NUEVO JUEGO"),t.qZA(),t.TgZ(3,"form",1)(4,"div",2)(5,"span",3),t._uU(6,"Participantes"),t.qZA(),t.TgZ(7,"div",4)(8,"p-button",5),t.NdJ("click",function(){return t.CHM(n),t.oxw().addParticipantControl()}),t.qZA(),t.TgZ(9,"p-button",6),t.NdJ("click",function(){return t.CHM(n),t.oxw().refreshColors()}),t.qZA()(),t.YNc(10,A,3,2,"div",7),t.qZA(),t.TgZ(11,"div",8)(12,"div",9)(13,"span",10),t._uU(14,"Puntos"),t.qZA(),t._UZ(15,"p-inputNumber",11),t.qZA(),t.TgZ(16,"div",12)(17,"span",13),t._uU(18,"Sets"),t.qZA(),t._UZ(19,"p-inputNumber",14),t.qZA()()(),t.TgZ(20,"button",15),t.NdJ("click",function(){return t.CHM(n),t.oxw().startGame()}),t._uU(21," Comenzar "),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(3),t.Q6J("formGroup",n.gameSettingsForm),t.xp6(7),t.Q6J("ngForOf",n.participants.controls),t.xp6(5),t.Q6J("showButtons",!0)("min",1)("max",6),t.xp6(4),t.Q6J("showButtons",!0)("min",1)("max",3),t.xp6(1),t.Q6J("disabled",!n.gameSettingsForm.valid)}}let S=(()=>{class e{constructor(n,r,s){this.fb=n,this.gameSettingsService=r,this.router=s}ngOnInit(){this.gameSettingsService.gameSettings$.pipe((0,h.q)(1)).subscribe(n=>{this.buildGameSettingsForm(n)})}get participants(){return this.gameSettingsForm.get("participants")}addParticipantControl(){var n;let r=0;this.participants.controls.length&&(r=(null===(n=this.participants.controls[this.participants.controls.length-1].get("id"))||void 0===n?void 0:n.value)+1),this.participants.controls.push(this.fb.group({id:this.fb.control(r,[o.kI.required]),name:this.fb.control("",[o.kI.required]),color:this.fb.control((0,u.R)(),[o.kI.required])})),this.participants.updateValueAndValidity()}removeParticipantControl(n){this.participants.removeAt(n),this.participants.updateValueAndValidity()}refreshColors(){var n;for(let r=0;r<this.participants.controls.length;r++)null===(n=this.participants.controls[r].get("color"))||void 0===n||n.setValue((0,u.R)())}startGame(){const n=this.gameSettingsForm.getRawValue();this.gameSettingsService.saveGameSettingsOnStorage(n),this.router.navigate(["game"])}buildGameSettingsForm({participants:n,goalScore:r}){this.gameSettingsForm=this.fb.group({participants:this.fb.array([],[o.kI.minLength(4)]),goalScore:this.fb.group({points:this.fb.control(r.points,[o.kI.min(1),o.kI.max(6)]),sets:this.fb.control(r.sets,[o.kI.min(1),o.kI.max(3)])})});for(let s=0;s<n.length;s++){const p=n[s];this.addParticipantControl(),this.participants.controls[s].setValue(p)}}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(o.qu),t.Y36(y.B),t.Y36(l.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],["formArrayName","participants",1,"participants"],[1,"participants-span"],[1,"participants-div"],["icon","pi pi-user-plus","label","Agregar","iconPos","left",1,"participants-button",3,"click"],["icon","pi pi-refresh","label","Colores","iconPos","left",1,"participants-button",3,"click"],["class","participant",4,"ngFor","ngForOf"],["formGroupName","goalScore",1,"score"],[1,"score-points"],[1,"score-points-span"],["formControlName","points","mode","decimal","buttonLayout","vertical","spinnerMode","vertical","decrementButtonClass","p-button-secondary","incrementButtonClass","p-button-secondary","incrementButtonIcon","pi pi-plus","decrementButtonIcon","pi pi-minus",3,"showButtons","min","max"],[1,"score-sets"],[1,"score-sets-span"],["formControlName","sets","mode","decimal","buttonLayout","vertical","spinnerMode","vertical","decrementButtonClass","p-button-secondary","incrementButtonClass","p-button-secondary","incrementButtonIcon","pi pi-plus","decrementButtonIcon","pi pi-minus",3,"showButtons","min","max"],["pButton","","type","button",1,"p-button-raised","p-button-rounded","p-button-success","start-button",3,"disabled","click"],[1,"participant"],[1,"participant-input",3,"formGroupName"],["icon","pi pi-trash","styleClass","p-button-danger",1,"participant-button",3,"disabled","click"]],template:function(n,r){1&n&&t.YNc(0,I,22,9,"app-center-layout",0),2&n&&t.Q6J("ngIf",r.gameSettingsForm)},directives:[c.O5,P,o._Y,o.JL,o.sg,o.CE,g.zx,c.sg,b,o.x0,N.Rn,o.JJ,o.u,g.Hq],styles:["[_nghost-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:32px}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .participants[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:8px}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .participants[_ngcontent-%COMP%]   .participants-div[_ngcontent-%COMP%]{display:flex;margin-bottom:8px;gap:8px}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .participants[_ngcontent-%COMP%]   .participant[_ngcontent-%COMP%]{display:flex;gap:16px}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-evenly;gap:8px}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]   .score-points[_ngcontent-%COMP%], [_nghost-%COMP%]   form[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]   .score-sets[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]   .score-points[_ngcontent-%COMP%]     .p-inputnumber, [_nghost-%COMP%]   form[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]   .score-sets[_ngcontent-%COMP%]     .p-inputnumber{width:6rem}[_nghost-%COMP%]   .start-button[_ngcontent-%COMP%]{margin:32px 0}"]}),e})(),Z=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.ez]]}),e})();var d=a(7786);let G=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.ez,d.m]]}),e})();const f=[{path:"",component:S}];let J=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.ez,l.Bz.forChild(f),d.m,Z,G]]}),e})()}}]);